% !TeX root = ../dd.tex
\section{Overview}
The system is a distributed application which follows the microservices architecture paradigm.\\
With the term client we are referring to either a Student or an Educator.\\
Users interact with the system by interfacing with a Content Delivery Network (CDN) that's a Single Page App (SPA) site which enables the forwarding of appropriate requests to an API Gateway.
The user is completely unaware of the microservices structure used to operate the system.\\
Each microservice realizes a service useful for the fulfillment of the single functionality that the CKB Platform is to provide.
Microservices do not communicate directly with each other but instead use an API Gateway.
All requests go through the API Gateway which realizes complex services by sending requests to the several available microservices.\\
The CKB platform can be abstracted into 5 main areas:
\begin{enumerate}

    \item Battles, Tournaments, Teams and Scores
    \item Notifications
    \item Badges
    \item Compiling
    \item Analysing

\end{enumerate}

\comment{mettere disegnino carino ad alto livello}\\

These sections contain modules with functionality related to the same domain independent of each other, consequently the areas will be implemented by different microservices ensuring low coupling and high cohesion.\\
The choice to use microservice architecture allows flexibility and scalability because all services can be duplicated by not having to interact with databases shared among microservices that could become bottlenecks of the system.
In particular, the API Gateway is responsible for performing load balancing and being stateless, more or less resources can be dynamically allocated depending on the load of requests that are received.\\
In addition, the components involved in sending notifications, compiling sources, running tests, and analyzing them perform more or less complex operations that may take a few moments of execution time.
Consequently, they will be implemented in such a way as to be asynchronous with the use of message queues avoiding making users wait for a long time (more details in later sections).


\section{Component view}
\begin{adjustbox}{
        max size={\textwidth}{\textheightwithcaption{1}},
        caption={Component view diagram},
        label={fig:Component view diagram},
        figure=H}
    \centering
    \puml{puml/component-view}
\end{adjustbox}
\pagebreak

\section{Deployment view}
\begin{adjustbox}{
        max size={\textwidth}{\textheightwithcaption{1}},
        caption={Deployment view diagram},
        label={fig:Deployment view diagram},
        figure=H}
    \centering
    \puml{puml/deployment-diagram}
\end{adjustbox}
\pagebreak

\section{Runtime view}

\begin{enumerate}[label=\textbf{RW\arabic*}:,ref=UC\arabic*,leftmargin=1.3cm]
    \labelleditem{
        \textbf{}
        \begin{adjustbox}{
                max size={\textwidth}{\textheightwithcaption{1}},
                caption={Educator creates a new Tournament},
                label={fig:Educator creates a new Tournament},
                figure=H}
            \centering
            \puml{puml/rw1}
        \end{adjustbox}
        \pagebreak
    }
    \labelleditem{
        \textbf{}
        \begin{adjustbox}{
                max size={\textwidth}{\textheightwithcaption{1}},
                caption={Educator creates a new badge},
                label={fig:Educator creates a new badge},
                figure=H}
            \centering
        \end{adjustbox}
        \pagebreak
    }
    \labelleditem{
        \textbf{}
        \begin{adjustbox}{
                max size={\textwidth}{\textheightwithcaption{1}},
                caption={Educator creates a new Battle for an Existing Tournament},
                label={fig:Educator creates a new Battle for an Existing Tournament},
                figure=H}
            \centering
            \puml{puml/rw3}
        \end{adjustbox}
        \pagebreak
    }
    \labelleditem{
        \textbf{}
        \begin{adjustbox}{
                max size={\textwidth}{\textheightwithcaption{1}},
                caption={Student joins to an existing Tournament by receiving a notification},
                label={fig:Student joins to an existing Tournament by receiving a notification},
                figure=H}
            \centering
        \end{adjustbox}
        \pagebreak
    }
    \labelleditem{
        \textbf{}
        \begin{adjustbox}{
                max size={\textwidth}{\textheightwithcaption{1}},
                caption={Students create a team for a tournament battle},
                label={fig:Students create a team for a tournament battle},
                figure=H}
            \centering
        \end{adjustbox}
        \pagebreak
    }
    \labelleditem{
        \textbf{}
        \begin{adjustbox}{
                max size={\textwidth}{\textheightwithcaption{1}},
                caption={Student forks the repository},
                label={fig:Student forks the repository},
                figure=H}
            \centering
        \end{adjustbox}
        \pagebreak
    }
    \labelleditem{
        \textbf{}
        \begin{adjustbox}{
                max size={\textwidth}{\textheightwithcaption{2}},
                caption={Student pushes and triggers automatic evaluation},
                label={fig:Student pushes and triggers automatic evaluation},
                figure=H}
            \centering
            \puml{puml/rw7}
        \end{adjustbox}
        \pagebreak
    }
    \labelleditem{
        \textbf{}
        \begin{adjustbox}{
                max size={\textwidth}{\textheightwithcaption{1}},
                caption={Educator manually evaluates teams},
                label={fig:Educator manually evaluates teams},
                figure=H}
            \centering
        \end{adjustbox}
        \pagebreak
    }
    \labelleditem{
        \textbf{}
        \begin{adjustbox}{
                max size={\textwidth}{\textheightwithcaption{1}},
                caption={Educator closes a tournament},
                label={fig:Educator closes a tournament},
                figure=H}
            \centering
        \end{adjustbox}
        \pagebreak
    }
\end{enumerate}

\section{Component interfaces}

\section{Selected architectural styles and patterns}

\section{Other design decisions}
