\section{External Interface Requirements}
\section{Functional Requirements}

\begin{enumerate}[label=\textbf{R\arabic*}:,leftmargin=1.3cm]
    \item The system shall allow the educator to create a tournament.
    \item The system shall allow the educator to specify the subscribe deadline of a tournamnent.
    \item The system shall allow the educator to grant other colleagues the permission to create battles within the context of a specific tournament.
    \item The system shall notify the students of the new tournament.
    \item The system shall allow the educator to close a tournament.
    \item The system shall allow the educator to create a battle within the context of a specific tournament.
          \begin{enumerate}[label=\textbf{R\arabic{enumi}.\arabic*}:, leftmargin=*]
              \item The system shall allow the educator to set minimum and maximum number of students per group.
              \item The system shall allow the educator to set a textual description.
              \item The system shall allow the educator to set the programming language.
              \item The system shall allow the educator to upload a set of test cases.
              \item The system shall allow the educator to upload a build automation script.
              \item The system shall allow the educator to set a registration deadline.
              \item The system shall allow the educator to set a final submission deadline.
              \item The system shall allow the educator to set configurations for scoring. %TODO: spiegare meglio
              \item The system shall allow the educator to create badges. %TODO: spiegare meglio
          \end{enumerate}
    \item The system shall notify students subscribed to a tournament of the creation of a new battle.
    \item The system shall allow students to join a battle on his/her own or by inviting other students. %TODO: spiegare meglio
    \item When the registration deadline expires, the system shall create a GitHub repository containing the code kata.
    \item The system shall send the link to all students who are members of subscribed teams.
    \item The system shall expose an API that can by called by the GitHub Action platform.
    \item On each push, the system shall pull the latest sources, analyze them, and run the tests on the corresponding executables to calculate and update the battle score of the team. %TODO: dividere(?)
    \item The system shall allow students and educators involved in the battle to see the current rank evolving during the battle.
    \item When the submission deadline expires, the system shall change the state of the battle to the consolidation stage.
    \item During the consolidation stage, the system shall allow the educator to go through the sources produced by each team to assign his/her score.
\end{enumerate}
\subsection{Use case diagrams}
\subsection{Use cases}
%Oppure facciamo tre sezioni separate per tabella, seq diagram e activity diagram,
% ma così mi sembra più leggibile.
\begin{enumerate}[label=\textbf{UC\arabic*}:,leftmargin=1.3cm]
    \item
    \item \textbf{}
          \pagebreak
    \item \textbf{}
          \begin{table}[H]
              %\caption*{\textbf{Title}}
              \centering
              \begin{tabular}{|l|p{11.9cm}|}
                  \hline
                  \textbf{Name}            & Student joins to an existing Tournament by receiving a notication                     \\\hline
                  \textbf{Actor}           & Student                                                                               \\\hline
                  \textbf{Entry condition} &
                  \begin{itemize}
                      \item Student has enabled the receival of tournament notifications
                  \end{itemize}                                                \\\hline
                  \textbf{Event flow}      &
                  \begin{enumerate}[label=\arabic*.]
                      \item Upon the creation of a new tournament, the platform sends a notification to all students which enabled them
                      \item The student receives a notification
                      \item The student clicks the notification
                      \item The platform shows the details of the new tournament.
                      \item The student clicks the \emph{sign up} button.
                      \item The platform enrolls the student in the tournament.
                      \item The platform shows a confirmation message.
                  \end{enumerate} \\\hline
                  \textbf{Exit condition}  & The student is subscribed                                                             \\\hline
                  %\textbf{Exception} &                                                                                              \\\hline
              \end{tabular}
              \caption{Subscribe to tournament from notification.}
              \label{table:Subscribe to tournament from notification}
          \end{table}

          \begin{figure}[H]
              \centering
              \puml{puml/UC3}
              \caption{Subscribe to tournament from notification}
              \label{fig:Subscribe to tournament from notification}
          \end{figure}
          \pagebreak
    \item \textbf{}
          \begin{table}[H]
              %\caption*{\textbf{Title}}
              \centering
              \begin{tabular}{|l|p{11.9cm}|}
                  \hline
                  \textbf{Name}            & Students create a team for a tournament battle                              \\\hline
                  \textbf{Actor}           & Inviting student, Invited student 1, Invited student 2                      \\\hline
                  \textbf{Entry condition} &
                  \begin{itemize}
                      \item Students are enrolled in the same tournament
                      \item Students are logged in
                      \item Invited student 1 has invitation notifications enabled
                  \end{itemize}                                            \\\hline
                  \textbf{Event flow}      &
                  \begin{enumerate}[label=\arabic*.]
                      \item The inviting student selects a tournament on \emph{HOMEPAGE}.
                      \item The platform shows the list of battles in the tournament.
                      \item The inviting student selects the battle.
                      \item The platform shows the details of the battle.
                      \item The inviting student clicks the \emph{create a team} button.
                      \item The platform creates a new team with the student.
                      \item The platform returns a confirmation message.
                      \item The inviting student inserts the name of invited student 1.
                      \item The platform creates an invitation for invited student 1.
                      \item The platform sends a notification to invited student 1.
                      \item Invited student 1 clicks on \emph{accept} on the notification.
                      \item The platform adds invited student 1 to the team.
                      \item The platform shows a confirmation message.
                      \item The inviting student inserts the name of invited student 2.
                      \item The platform creates an invitation for invited student 2.
                      \item Invited student 2 visits the \emph{HOMEPAGE}.
                      \item The platform returns the homepage, with the invites.
                      \item Invited student 2 clicks the \emph{accept} button of the invitation.
                      \item The platform adds invited student 2 to the team.
                      \item The platform shows a confirmation message.
                      \item The inviting student refreshes the battle page.
                      \item The platform shows the details of the battle, along with the team information.
                      \item The inviting student clicks the \emph{partecipate with team} button.
                      \item The platform signs up the team to the battle.
                      \item The platform shows a confirmation message.
                  \end{enumerate}                    \\\hline
                  \textbf{Exit condition}  & The students are all subscribed in a battle with the same team              \\\hline
                  \textbf{Exception}       & The team does not respect the partecipant number requirement of the battle.
                  In that case, the platform returns an error and the student can invite additional members              \\\hline
              \end{tabular}
              \caption{Create a team.}
              \label{table:Create a team}
          \end{table}
          \pagebreak

          \begin{figure}[H]
              \centering
              \puml{puml/UC4}
              \caption{Create a team}
              \label{fig:Create a team}
          \end{figure}
          \pagebreak
          \item \textbf{}
          \begin{table}[H]
              %\caption*{\textbf{Title}}
              \centering
              \begin{tabular}{|l|p{11.9cm}|}
                  \hline
                  \textbf{Name}            & The Platform creates the GitHub repository                     \\\hline
                  \textbf{Actor}           & Student                                                                               \\\hline
                  \textbf{Entry condition} &
                  \begin{itemize}
                      \item The battle's registration deadline expires
                  \end{itemize}                                                \\\hline
                  \textbf{Event flow}      &
                  \begin{enumerate}[label=\arabic*.]
                      \item When the registration deadline of a battle expires, the platform starts the creation of the repository.
                      \item The platform gets the battle info.
                      \item The platform get the CodeKata of the battle.
                      \item The platform creates the repository GitHub with name, description and the CodeKata
                      \item The platform gets all the teams registered for the battle.
                      \item The platform notifies all the students that are in a team.
                  \end{enumerate} \\\hline
                  \textbf{Exit condition}  & The GitHub repository for the battle is created                                                            \\\hline
                  %\textbf{Exception} &                                                                                              \\\hline
              \end{tabular}
              \caption{The Platform creates the GitHub repository   .}
              \label{table:Subscribe to tournament from notification}
          \end{table}

          \begin{figure}[H]
              \centering
              \puml{puml/UC5}
              \caption{The Platform creates the GitHub repository   .}
              \label{fig:Subscribe to tournament from notification}
          \end{figure}
          \pagebreak
    \item \textbf{}
          \begin{table}[H]
              %\caption*{\textbf{Title}}
              \centering
              \begin{tabular}{|l|p{11.9cm}|}
                  \hline
                  \textbf{Name}            & The Platform calculates the team battle and personal students score                    \\\hline
                  \textbf{Actor}           & Student                                                                               \\\hline
                  \textbf{Entry condition} &
                  \begin{itemize}
                      \item Student has pushed new file to the forked battle repository
                  \end{itemize}                                                \\\hline
                  \textbf{Event flow}      &
                  \begin{enumerate}[label=\arabic*.]
                      \item The student commits project code.
                      \item The student pushes the commited project code to the Forked group GitHub repository.
                      \item The platform gets notified about the new push.
                      \item The platform pull the updated project code.
                      \item The platform gets info (tournament, group, students, aspects_to_check) regarding the repo that is analyzing.
                      \item The platform analyzes the code.
                      \item The platform runs all the test cases associated for that battle.
                      \item The platform calculates the days that have passed since the start of the battle.
                      \item The platform runs the static analysis tools.
                      \item The platform calculates the total scores.
                      \item The platform update the battle team score.
                      \item The platform update the personal tournament score for each student in the team.
                      \item The platform shows a confirmation message.
                  \end{enumerate} \\\hline
                  \textbf{Exit condition}  & The battle team and students tournament score are updated                                                             \\\hline
                  %\textbf{Exception} &                                                                                              \\\hline
              \end{tabular}
              \caption{The Platform calculates the team's battle score.}
              \label{table:Subscribe to tournament from notification}
          \end{table}

          \begin{figure}[H]
              \centering
              \puml{puml/UC6}
              \caption{The Platform calculates the team's battle score.}
              \label{fig:Subscribe to tournament from notification}
          \end{figure}
          \pagebreak
    \item \textbf{}
          \begin{table}[H]
              %\caption*{\textbf{Title}}
              \centering
              \begin{tabular}{|l|p{11.9cm}|}
                  \hline
                  \textbf{Name}            & The educator manually evaluate teams                                       \\\hline
                  \textbf{Actor}           & Educator, Students                                                          \\\hline
                  \textbf{Entry condition} &
                  \begin{itemize}
                      \item Educator has logged in
                      \item Educator has permission to modify the battle
                  \end{itemize}                                                      \\\hline
                  \textbf{Event flow}      &
                  \begin{enumerate}[label=\arabic*.]
                      \item When the submission deadline expires, the platform opens the comsolidation stage.
                      \item The educator selects a tournament from the \emph{HOMEPAGE}
                      \item The platform shows the list of battles in the tournament.
                      \item The educator selects the battle.
                      \item The platform shows the details of the battle.
                      \item The educator clicks the \emph{evaluate} button.
                      \item The platform shows sources submitted by each team.
                      \item The educator assigns a score to each team.
                      \item The educator clicks the \emph{close} button in the battle page.
                      \item The platform calculates the final battle ranks.
                      \item The platform notifies students who participated in the battle.
                  \end{enumerate}                 \\\hline
                  \textbf{Exit condition}  & The battle is closed                                                        \\\hline
                  \textbf{Exception}       & The educator clicks the \emph{close} button before evaluating all students.
                  In this case the platform return an error and the educator can assign the missing grades.              \\\hline
                  %\textbf{Special reqs}    &                                                      \\\hline
              \end{tabular}
              \caption{The educator manually evaluate teams.}
              \label{table:The educator manually evaluate teams}
          \end{table}

          \begin{figure}[H]
              \centering
              \puml{puml/UC7}
              \caption{The educator manually evaluate teams.}
              \label{fig:The educator manually evaluate teams}
          \end{figure}

          \pagebreak

    \item \textbf{}
          \begin{table}[H]
              %\caption*{\textbf{Title}}
              \centering
              \begin{tabular}{|l|p{11.9cm}|}
                  \hline
                  \textbf{Name}            & The educator closes a tournament                     \\\hline
                  \textbf{Actor}           & Educator, Students                                   \\\hline
                  \textbf{Entry condition} &
                  \begin{itemize}
                      \item Educator has logged in
                      \item Educator has permission to modify the tournament
                      \item All battles in the tournament are closed
                  \end{itemize}                           \\\hline
                  \textbf{Event flow}      &
                  \begin{enumerate}[label=\arabic*.]
                      \item Educator clicks the \emph{close} button in the tournament page.
                      \item The platform calculates the final tournament rank.
                      \item The platform assigns badges to the student who fulfilled the rules.
                      \item The platform notifies students who participated in the tournament.
                  \end{enumerate}        \\\hline
                  \textbf{Exit condition}  & The tournament is closed and the bedges are assigned \\\hline
                  %\textbf{Exception}       &                                                      \\\hline
                  %\textbf{Special reqs}    &                                                      \\\hline
              \end{tabular}
              \caption{The educator closes a tournament.}
              \label{table:The educator closes a tournament}
          \end{table}

          \begin{figure}[H]
              \centering
              \puml{puml/UC8}
              \caption{The educator closes a tournament.}
              \label{fig:The educator closes a tournament}
          \end{figure}

\end{enumerate}
\subsection{Requirements mapping}
\section{Performance Requirements}

\section{Design Constraints}
\subsection{Standards Compliance}
The CodeKataBattle (CKB) platform is designed with the goal of strictly adhering to several standards to ensure the quality, security and interoperability of the system.\\ The standards to which CKB adheres include:

\begin{enumerate}
    \item HTTPS Protocol Compliance\\
          Implementation of the HTTPS protocol according to the cryptographic standards established by IETF (Internet Engineering Task Force).

    \item Accessibility Standards\\
          Compliance with Web Content Accessibility Guidelines (WCAG) to ensure web accessibility.

    \item Security Standards\\
          Implementation of security best practices as defined by OWASP (Open Web Application Security Project) and NIST (National Institute of Standards and Technology).
          Such as password storage encryption with HASH512 + Salt, SSL Certificate and end-to-end communication encryption.


    \item API Interoperability\\
          Use of open standards for API design, such as RESTful API and adherence to specifications such as OpenAPI (Swagger).


    \item Coding Standards\\
          The platform follows universally accepted coding guidelines for the main programming language used in system development (e.g., Java or Python).
          Compliance with the coding guidelines for the main programming language (PEP 8 for Python, Java Coding Conventions for Java).


    \item Compliance with Privacy Regulations\\
          Compliance with privacy laws such as the General Data Protection Regulation (GDPR) for European citizens.
\end{enumerate}

\subsection{Hardware limitations}
Each student and educator must have an electronic device such as a computer or smartphone with an internet connection to
access the CKB Platform.
Students must be able to clone GitHub repositories on their device to participate in the various battles and accordingly must have a physical storage with sufficient space to store the sources and data of the various projects.
The device used must allow the student to view, edit, process and execute the sources.
The devices used by students and educators enable them to receive notifications.

\section{Software System Attributes}
\subsection{Reliability}
The CKB platform does not manage critical operations.
If an operation fails, it can be re-executed without any particular consequences.
For example, if the evaluation of an exercise fails, students can resubmit their code.
It is therefore reasonable to have a failure rate around 1\%.

\subsection{Availability}
The platform should have the lowest downtime possible during the day.
A few hours of downtime are allowed between 1am and 5am, when student are usually not studying.
The platform shall therefore guarantee 99\% (two-nines) of availability, so that 3.65 days of downtime per year are allowed.

\subsection{Security}
Communication between the user and the CBK platform is encrypted with HTTPS. %Forse non posso dirlo qua(?)
Furthermore, users must only be able to perform operations that they are authorized to do.
For example, a student must not be able to change his grade.

\subsection{Maintainability}
The system should be divided in scalable and reusable modules,
which will be easier to maintain and replace in case of failure.
Ordinary maintenance, for bug fixes and improvements, will be scheduled during night time, when the user traffic is minimal.

\subsection{Portability}
The CKD platform does not require any particular hardware or software.
It must be accessible from any operating system with a modern web browser.
A mobile application that allows users to see the state of the battles can also be developed.
Since the mobile app does not require any special function, a non-native approach can be adopted.
It is therefore possible to use cross-platform development tools, which can speed up the development process.